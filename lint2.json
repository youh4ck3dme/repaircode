[{"filePath":"C:\\Users\\42195\\repaircode\\src\\pages\\LiveCodeOnline.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'PipelineVisualization' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"PipelineVisualization"},"fix":{"range":[528,555],"text":""},"desc":"Remove unused variable 'PipelineVisualization'."}]}],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":1,"message":"'fileFilter' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":39,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"fileFilter"},"fix":{"range":[1780,1790],"text":""},"desc":"Remove unused variable 'fileFilter'."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":1,"message":"'setFileFilter' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":39,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"setFileFilter"},"fix":{"range":[1790,1805],"text":""},"desc":"Remove unused variable 'setFileFilter'."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback, useMemo } from \"react\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport JSZip from \"jszip\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Upload, Play, RefreshCw, Terminal, FileText as FileCode, Zap } from \"lucide-react\";\r\n\r\nimport FileTree from \"../components/CodeSandbox/FileTree\";\r\nimport CodeViewer from \"../components/CodeSandbox/CodeViewer\";\r\nimport AIAnalysisPanel from \"../components/CodeSandbox/AIAnalysisPanel\";\r\nimport ShimmerText from \"../components/ShimmerText\";\r\nimport PipelineVisualization from \"../components/CodeSandbox/PipelineVisualization\";\r\nimport AgentChatLog from \"../components/CodeSandbox/AgentChatLog\";\r\nimport StatsDashboard from \"../components/CodeSandbox/StatsDashboard\";\r\nimport ParticleBackground from \"../components/ParticleBackground\";\r\n\r\nconst LiveCodeOnline = () => {\r\n  const [files, setFiles] = useState([]);\r\n  const [expandedFolders, setExpandedFolders] = useState({});\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n  const [fileContent, setFileContent] = useState(\"\");\r\n  const [uploadedZipFile, setUploadedZipFile] = useState(null);\r\n\r\n  const [isExtracting, setIsExtracting] = useState(false);\r\n  const [extractionProgress, setExtractionProgress] = useState(0);\r\n  const [showDashboard, setShowDashboard] = useState(false);\r\n\r\n  // Simulation State\r\n  const [simulationStage, setSimulationStage] = useState(\"idle\"); // idle, analyzer, factory, polisher, completed\r\n  const [agentLogs, setAgentLogs] = useState([]);\r\n  const [stats] = useState({\r\n    filesProcessed: 0,\r\n    issuesFound: 0,\r\n    issuesFixed: 0,\r\n  });\r\n\r\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\r\n  const [issues, setIssues] = useState([]);\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [fileFilter, setFileFilter] = useState(\"all\");\r\n\r\n  const addLog = useCallback((agent, message) => {\r\n    setAgentLogs((prev) => [...prev, { id: Date.now(), agent, message }]);\r\n  }, []);\r\n\r\n  const runSimulation = useCallback(async () => {\r\n    if (files.length === 0) {\r\n      addLog(\"system\", \"Error: No files detected for analysis.\");\r\n      return;\r\n    }\r\n\r\n    setShowDashboard(false);\r\n    setSimulationStage(\"diagnostics\");\r\n    setIsAnalyzing(true);\r\n    setAgentLogs([]);\r\n    setIssues([]);\r\n\r\n    const pollJob = async (jobId) => {\r\n      while (true) {\r\n        const res = await fetch(`http://localhost:4000/api/proxy/status/${jobId}`);\r\n        const data = await res.json();\r\n        if (data.status === 'completed') return data.result;\r\n        if (data.status === 'failed') throw new Error(data.error || \"Job failed\");\r\n        await new Promise(r => setTimeout(r, 2000));\r\n      }\r\n    };\r\n\r\n    try {\r\n      addLog(\"Diagnostics\", \"Initializing codebase scan via AI Sandbox Proxy...\");\r\n\r\n      const formData = new FormData();\r\n      if (typeof uploadedZipFile !== 'undefined' && uploadedZipFile) {\r\n        formData.append('file', uploadedZipFile);\r\n      }\r\n\r\n      const diagRes = await fetch('http://localhost:4000/api/proxy/diagnostics', {\r\n        method: 'POST',\r\n        body: formData\r\n      });\r\n\r\n      let diagData = await diagRes.json();\r\n      if (diagRes.status === 202) {\r\n        addLog(\"system\", `Job accepted. ID: ${diagData.job_id}. Polling...`);\r\n        diagData = await pollJob(diagData.job_id);\r\n      }\r\n\r\n      const analysis = diagData.result?.json || diagData.json || {};\r\n      const markdown = diagData.result?.markdown || diagData.markdown || \"\";\r\n\r\n      addLog(\"Diagnostics\", `Analysis complete. Stack: ${analysis.language_stack?.join(\", \") || \"Unknown\"}`);\r\n      if (markdown) addLog(\"analyzer\", \"Context: \" + markdown.split('\\n')[0]);\r\n\r\n      setSimulationStage(\"security\");\r\n      addLog(\"Security\", \"Running real-time SCA scan on package.json...\");\r\n\r\n      const pkgFile = files.find(f => f.name === 'package.json');\r\n      if (pkgFile) {\r\n        const scanFormData = new FormData();\r\n        const blob = new Blob([pkgFile.content], { type: 'application/json' });\r\n        scanFormData.append('manifest', blob, 'package.json');\r\n\r\n        const scanRes = await fetch('http://localhost:4000/api/proxy/scan', {\r\n          method: 'POST',\r\n          body: scanFormData\r\n        });\r\n        const scaData = await scanRes.json();\r\n\r\n        if (scaData.vulnerabilities) {\r\n          addLog(\"Security\", `Found ${scaData.vulnerabilities.length} vulnerabilities.`);\r\n          const securityIssues = scaData.vulnerabilities.map(v => ({\r\n            severity: v.severity,\r\n            title: `SCA: ${v.package}`,\r\n            description: v.description,\r\n            suggestion: v.fix_command\r\n          }));\r\n          setIssues(prev => [...prev, ...securityIssues]);\r\n        }\r\n      }\r\n\r\n      setSimulationStage(\"performance\");\r\n      await new Promise(r => setTimeout(r, 1000));\r\n      setSimulationStage(\"architecture\");\r\n      await new Promise(r => setTimeout(r, 1000));\r\n      setSimulationStage(\"repair\");\r\n      addLog(\"system\", \"Generating final repair plan...\");\r\n      await new Promise(r => setTimeout(r, 2000));\r\n\r\n      setSimulationStage(\"completed\");\r\n      setIsAnalyzing(false);\r\n      addLog(\"system\", \"Pipeline complete. All agents finalized.\");\r\n\r\n    } catch (error) {\r\n      console.error(\"Simulation error:\", error);\r\n      addLog(\"error\", `Analysis failed: ${error.message}`);\r\n      setIsAnalyzing(false);\r\n      setSimulationStage(\"completed\");\r\n    }\r\n  }, [files, addLog, uploadedZipFile]);\r\n\r\n  const onSelectFile = useCallback((file) => {\r\n    if (file.type === \"folder\") return;\r\n    setSelectedFile(file);\r\n    if (!file.content) {\r\n      setFileContent(\"// Binary file or empty\");\r\n    } else {\r\n      setFileContent(file.content);\r\n    }\r\n  }, []);\r\n\r\n  const onDrop = useCallback((acceptedFiles) => {\r\n    const file = acceptedFiles[0];\r\n    if (file) {\r\n      setUploadedZipFile(file);\r\n      setIsExtracting(true);\r\n      setExtractionProgress(0);\r\n\r\n      const reader = new FileReader();\r\n      reader.onload = async (e) => {\r\n        try {\r\n          const zip = new JSZip();\r\n          const contents = await zip.loadAsync(e.target.result);\r\n\r\n          const filesArray = [];\r\n          const totalFiles = Object.keys(contents.files).length;\r\n          let processedCount = 0;\r\n\r\n          for (const [path, zipEntry] of Object.entries(contents.files)) {\r\n            if (processedCount > 50) break;\r\n\r\n            const fileName = path.split(\"/\").pop();\r\n            const type = zipEntry.dir\r\n              ? \"folder\"\r\n              : fileName.includes(\".\")\r\n                ? fileName.split(\".\").pop()\r\n                : \"file\";\r\n\r\n            let content = \"\";\r\n            if (!zipEntry.dir) {\r\n              try {\r\n                if (\r\n                  [\"js\", \"jsx\", \"ts\", \"tsx\", \"css\", \"html\", \"json\", \"md\", \"txt\", \"gitignore\", \"env\"].includes(type)\r\n                ) {\r\n                  content = await zipEntry.async(\"string\");\r\n                } else {\r\n                  content = \"// Binary or unsupported file type\";\r\n                }\r\n              } catch {\r\n                content = \"// Error reading file\";\r\n              }\r\n            }\r\n\r\n            filesArray.push({\r\n              id: path,\r\n              name: fileName,\r\n              path: path,\r\n              type: type,\r\n              content: content,\r\n              healthScore: Math.floor(Math.random() * 100),\r\n            });\r\n\r\n            processedCount++;\r\n            setExtractionProgress(Math.floor((processedCount / Math.min(totalFiles, 50)) * 100));\r\n            if (processedCount % 5 === 0) await new Promise(r => setTimeout(r, 50));\r\n          }\r\n\r\n          for (let p = 0; p <= 100; p += 5) {\r\n            setExtractionProgress(p);\r\n            await new Promise(r => setTimeout(r, 50));\r\n          }\r\n\r\n          setFiles(filesArray);\r\n          setIsExtracting(false);\r\n          setShowDashboard(true);\r\n\r\n          const firstFile = filesArray.find((f) => f.type !== \"folder\");\r\n          if (firstFile) {\r\n            onSelectFile(firstFile);\r\n          }\r\n        } catch {\r\n          setIsExtracting(false);\r\n          setExtractionProgress(0);\r\n        }\r\n      };\r\n      reader.readAsArrayBuffer(file);\r\n    }\r\n  }, [onSelectFile]);\r\n\r\n  const dropzoneOptions = useMemo(() => ({\r\n    onDrop,\r\n    accept: {\r\n      \"application/zip\": [\".zip\"],\r\n      \"application/x-zip-compressed\": [\".zip\"],\r\n    },\r\n    multiple: false,\r\n  }), [onDrop]);\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone(dropzoneOptions);\r\n\r\n  const buildTree = (filesList) => {\r\n    const tree = [];\r\n    filesList.forEach((file) => {\r\n      if (!file.name) return;\r\n      const parts = file.path.split(\"/\").filter((p) => p);\r\n      let currentLevel = tree;\r\n\r\n      parts.forEach((part, index) => {\r\n        const isLast = index === parts.length - 1;\r\n        const existingNode = currentLevel.find((item) => item.name === part);\r\n\r\n        if (existingNode) {\r\n          if (existingNode.type === \"folder\") {\r\n            currentLevel = existingNode.children;\r\n          }\r\n        } else {\r\n          const isFolder = !isLast || file.type === \"folder\";\r\n          const newNode = {\r\n            id: file.path,\r\n            name: part,\r\n            type: isFolder ? \"folder\" : file.type,\r\n            children: [],\r\n            content: isLast ? file.content : null,\r\n          };\r\n          if (!isLast) {\r\n            const partialPath = parts.slice(0, index + 1).join(\"/\");\r\n            newNode.id = partialPath;\r\n          }\r\n          currentLevel.push(newNode);\r\n          if (isFolder) {\r\n            currentLevel = newNode.children;\r\n          }\r\n        }\r\n      });\r\n    });\r\n    return tree;\r\n  };\r\n\r\n  const fileTreeData = useMemo(() => buildTree(files), [files]);\r\n\r\n  const handleSelectNode = (node) => {\r\n    if (node.type === \"folder\") {\r\n      setExpandedFolders((prev) => ({ ...prev, [node.id]: !prev[node.id] }));\r\n    } else {\r\n      setSelectedFile(node);\r\n      setFileContent(node.content || \"\");\r\n    }\r\n  };\r\n\r\n  const getHealthColor = (score) => {\r\n    if (score > 70) return \"text-green-400 border-green-500/30 bg-green-500/10\";\r\n    if (score >= 50) return \"text-orange-400 border-orange-500/30 bg-orange-500/10\";\r\n    return \"text-red-400 border-red-500/30 bg-red-500/10\";\r\n  };\r\n\r\n  const [mobileTab, setMobileTab] = useState(\"explorer\");\r\n\r\n  return (\r\n    <div className=\"min-h-screen pt-20 pb-10 px-4 sm:px-6 lg:px-8 max-w-[1800px] mx-auto\">\r\n      <div className=\"text-center mb-8 md:mb-12\">\r\n        <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-accent/10 border border-accent/20 mb-4\">\r\n          <Terminal className=\"w-4 h-4 text-accent\" />\r\n          <span className=\"text-sm text-accent font-semibold\">\r\n            Viacagentový systém aktívny\r\n          </span>\r\n        </div>\r\n        <h1 className=\"text-3xl md:text-5xl font-bold text-white mb-4\">\r\n          Živý kódový <ShimmerText>Sandbox</ShimmerText>\r\n        </h1>\r\n        <p className=\"text-base md:text-lg text-gray-400 max-w-2xl mx-auto\">\r\n          Nahrajte váš .zip kód a sledujte, ako naši AI agenti analyzujú, opravujú a\r\n          leštia ho v reálnom čase.\r\n        </p>\r\n      </div>\r\n\r\n      {!showDashboard && files.length === 0 && !isExtracting ? (\r\n        <motion.div\r\n          initial={{ opacity: 0, scale: 0.95 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n          transition={{ duration: 0.5 }}\r\n          className=\"max-w-2xl mx-auto\"\r\n        >\r\n          <div\r\n            {...getRootProps()}\r\n            className={`relative overflow-hidden p-8 md:p-12 border-2 border-dashed rounded-2xl cursor-pointer transition-all ${isDragActive\r\n              ? \"border-accent bg-accent/10 scale-105\"\r\n              : \"border-white/20 bg-surface/50 hover:border-accent/50 hover:bg-surface/80\"\r\n              }`}\r\n          >\r\n            <ParticleBackground />\r\n            <input {...getInputProps()} />\r\n            <div className=\"text-center relative z-10\">\r\n              <div className=\"w-16 h-16 md:w-20 md:h-20 bg-accent/10 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n                <Upload className=\"w-8 h-8 md:w-10 md:h-10 text-accent\" />\r\n              </div>\r\n              <h3 className=\"text-xl md:text-2xl font-bold text-white mb-2\">\r\n                {isDragActive ? \"Presuňte váš .zip súbor sem\" : \"Nahrať kódovú základňu\"}\r\n              </h3>\r\n              <p className=\"text-sm md:text-base text-gray-400 mb-4\">\r\n                Pretiahnite .zip súbor sem alebo kliknite na prehľadávanie\r\n              </p>\r\n              <p className=\"text-xs text-gray-600\">\r\n                Podporuje: .zip súbory do 50MB\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      ) : isExtracting ? (\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"max-w-md mx-auto bg-surface/80 backdrop-blur-xl border border-white/10 rounded-2xl p-6 md:p-8 shadow-2xl\"\r\n        >\r\n          <div className=\"text-center mb-6\">\r\n            <RefreshCw className=\"w-10 h-10 md:w-12 md:h-12 text-accent mx-auto mb-4 animate-spin\" />\r\n            <h3 className=\"text-lg md:text-xl font-bold text-white mb-2\">Rozbaľujem kódovú základňu</h3>\r\n            <p className=\"text-sm text-gray-400\">Analyzujem štruktúru súborov a bezpečnostné vzory...</p>\r\n          </div>\r\n          <div className=\"relative h-3 md:h-4 bg-white/5 rounded-full overflow-hidden border border-white/10\">\r\n            <motion.div\r\n              className=\"absolute inset-y-0 left-0 bg-accent\"\r\n              initial={{ width: 0 }}\r\n              animate={{ width: `${extractionProgress}%` }}\r\n              transition={{ duration: 0.3 }}\r\n            />\r\n          </div>\r\n          <div className=\"mt-4 flex justify-between text-[10px] text-gray-500 font-mono\">\r\n            <span>UNZIPPING_STREAM</span>\r\n            <span>STAV: {extractionProgress}%</span>\r\n          </div>\r\n        </motion.div>\r\n      ) : showDashboard ? (\r\n        <motion.div\r\n          initial={{ opacity: 0, scale: 0.98 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n          className=\"max-w-6xl mx-auto\"\r\n        >\r\n          <div className=\"bg-surface/50 backdrop-blur-md border border-white/10 rounded-2xl overflow-hidden shadow-2xl\">\r\n            <div className=\"p-4 md:p-6 border-b border-white/10 flex flex-col md:flex-row justify-between items-center gap-4 bg-white/5\">\r\n              <div className=\"text-center md:text-left\">\r\n                <h2 className=\"text-xl md:text-2xl font-bold text-white\">Prehľad projektu</h2>\r\n                <p className=\"text-gray-400 text-xs md:text-sm\">Počiatočný automatizovaný audit dokončený.</p>\r\n              </div>\r\n              <button\r\n                onClick={runSimulation}\r\n                className=\"w-full md:w-auto px-6 py-2.5 bg-accent text-primary rounded-xl font-bold hover:bg-white transition-all transform hover:scale-105 flex items-center justify-center gap-2 shadow-lg shadow-accent/20\"\r\n              >\r\n                <Play className=\"w-4 h-4\" />\r\n                Spustiť AI agentov\r\n              </button>\r\n            </div>\r\n            <div className=\"p-4 md:p-6\">\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 h-[400px] md:h-[500px] overflow-y-auto pr-2 custom-scrollbar\">\r\n                {files.filter(f => f.type !== 'folder').map((file, idx) => (\r\n                  <motion.div\r\n                    key={file.path}\r\n                    initial={{ opacity: 0, y: 10 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ delay: idx * 0.01 }}\r\n                    className=\"p-4 bg-white/5 border border-white/10 rounded-xl hover:border-accent/30 transition-all group\"\r\n                  >\r\n                    <div className=\"flex justify-between items-start mb-3\">\r\n                      <div className=\"p-2 bg-accent/10 rounded-lg\">\r\n                        <FileCode className=\"w-5 h-5 text-accent\" />\r\n                      </div>\r\n                      <div className={`px-2 py-1 rounded text-[10px] font-bold border ${getHealthColor(file.healthScore)}`}>\r\n                        {file.healthScore}% ZDRAVIE\r\n                      </div>\r\n                    </div>\r\n                    <h4 className=\"text-white font-medium truncate mb-1 group-hover:text-accent transition-colors\">\r\n                      {file.name}\r\n                    </h4>\r\n                    <p className=\"text-[10px] text-gray-500 truncate font-mono\">\r\n                      {file.path}\r\n                    </p>\r\n                  </motion.div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      ) : (\r\n        <div className=\"flex flex-col h-[calc(100vh-250px)] lg:h-[800px] gap-4\">\r\n          <div className=\"flex lg:hidden bg-surface/50 border border-white/10 rounded-xl p-1 shrink-0\">\r\n            {[\r\n              { id: \"explorer\", label: \"Prieskumník\", icon: FileCode },\r\n              { id: \"editor\", label: \"Kód\", icon: Terminal },\r\n              { id: \"analysis\", label: \"Analýza\", icon: Zap },\r\n            ].map((tab) => {\r\n              const Icon = tab.icon;\r\n              return (\r\n                <button\r\n                  key={tab.id}\r\n                  onClick={() => setMobileTab(tab.id)}\r\n                  className={`flex-1 flex items-center justify-center gap-2 py-2.5 rounded-lg text-sm font-medium transition-all ${mobileTab === tab.id\r\n                    ? \"bg-accent text-primary shadow-lg shadow-accent/20\"\r\n                    : \"text-gray-400 hover:text-white\"\r\n                    }`}\r\n                >\r\n                  <Icon className=\"w-4 h-4\" />\r\n                  {tab.label}\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6 flex-1 overflow-hidden\">\r\n            <div className={`${mobileTab === \"explorer\" ? \"flex\" : \"hidden\"} lg:flex lg:col-span-3 bg-surface/50 rounded-xl border border-white/10 overflow-hidden flex-col`}>\r\n              <div className=\"p-3 md:p-4 border-b border-white/10 flex justify-between items-center bg-white/5\">\r\n                <h3 className=\"font-semibold text-white flex items-center gap-2\">\r\n                  <FileCode className=\"w-4 h-4 text-accent\" />\r\n                  Prieskumník\r\n                </h3>\r\n                <span className=\"text-[10px] text-gray-500\">\r\n                  {files.length} súborov\r\n                </span>\r\n              </div>\r\n              <div className=\"flex-1 overflow-y-auto p-2\">\r\n                <FileTree\r\n                  data={fileTreeData}\r\n                  onSelect={(node) => {\r\n                    handleSelectNode(node);\r\n                    if (node.type !== \"folder\") setMobileTab(\"editor\");\r\n                  }}\r\n                  selectedFile={selectedFile ? selectedFile.id : null}\r\n                  expandedFolders={expandedFolders}\r\n                  onToggleFolder={(id) =>\r\n                    setExpandedFolders((prev) => ({ ...prev, [id]: !prev[id] }))\r\n                  }\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className={`${mobileTab === \"editor\" ? \"flex\" : \"hidden\"} lg:flex lg:col-span-6 bg-[#1e1e1e] rounded-xl border border-white/10 overflow-hidden flex-col shadow-2xl relative`}>\r\n              <div className=\"p-3 border-b border-white/10 flex justify-between items-center bg-[#2d2d2d] z-10\">\r\n                <div className=\"flex items-center gap-2 truncate\">\r\n                  <span className=\"text-xs md:text-sm text-gray-300 font-mono truncate\">\r\n                    {selectedFile ? selectedFile.name : \"Žiadny súbor\"}\r\n                  </span>\r\n                </div>\r\n                {selectedFile && (\r\n                  <div className=\"flex gap-2 shrink-0\">\r\n                    <span className=\"text-[10px] px-2 py-0.5 rounded bg-blue-500/20 text-blue-400 border border-blue-500/30\">\r\n                      R/O\r\n                    </span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"flex-1 overflow-hidden relative\">\r\n                {selectedFile ? (\r\n                  <CodeViewer\r\n                    code={fileContent}\r\n                    language={selectedFile?.type || \"javascript\"}\r\n                    showLineNumbers={true}\r\n                  />\r\n                ) : (\r\n                  <div className=\"absolute inset-0 flex flex-col items-center justify-center text-gray-600\">\r\n                    <FileCode className=\"w-12 h-12 mb-4 opacity-20\" />\r\n                    <p>Vyberte súbor na zobrazenie</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className={`${mobileTab === \"analysis\" ? \"flex\" : \"hidden\"} lg:flex lg:col-span-3 flex-col gap-4 md:gap-6 h-full overflow-hidden`}>\r\n              <div className=\"bg-surface/50 rounded-xl border border-white/10 p-4 shrink-0\">\r\n                <h3 className=\"text-white font-semibold mb-3 flex items-center gap-2 text-sm\">\r\n                  <Terminal className=\"w-4 h-4 text-accent\" />\r\n                  Ovládanie agentov\r\n                </h3>\r\n\r\n                {simulationStage === \"idle\" || simulationStage === \"completed\" ? (\r\n                  <button\r\n                    onClick={runSimulation}\r\n                    className=\"w-full py-2.5 md:py-3 bg-accent text-primary rounded-xl font-bold hover:bg-white transition-all flex items-center justify-center gap-2 shadow-lg shadow-accent/20 active:scale-95\"\r\n                  >\r\n                    {simulationStage === \"completed\" ? (\r\n                      <>\r\n                        <RefreshCw className=\"w-4 h-4\" />\r\n                        Re-Audit\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <Play className=\"w-4 h-4\" />\r\n                        Spustiť AI Audit\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                ) : (\r\n                  <div className=\"w-full py-2.5 md:py-3 bg-white/5 text-gray-400 rounded-xl font-bold flex items-center justify-center gap-2 cursor-not-allowed border border-white/10\">\r\n                    <div className=\"w-4 h-4 border-2 border-accent/50 border-t-accent rounded-full animate-spin\" />\r\n                    Analyzujem...\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"flex-1 flex flex-col gap-4 overflow-hidden\">\r\n                {simulationStage !== \"idle\" && (\r\n                  <div className=\"shrink-0\">\r\n                    <StatsDashboard stats={stats} show={true} />\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"flex-1 min-h-[200px] flex flex-col gap-4 overflow-hidden\">\r\n                  <div className=\"flex-1\">\r\n                    <AgentChatLog logs={agentLogs} />\r\n                  </div>\r\n\r\n                  {issues.length > 0 && (\r\n                    <div className=\"h-64 bg-surface/50 rounded-xl border border-white/10 overflow-hidden flex flex-col shrink-0\">\r\n                      <AIAnalysisPanel\r\n                        issues={issues}\r\n                        isAnalyzing={isAnalyzing}\r\n                        onApplyFix={() => { }}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LiveCodeOnline;\r\n","usedDeprecatedRules":[]}]
